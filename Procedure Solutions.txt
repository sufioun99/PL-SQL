1.
CREATE OR REPLACE PROCEDURE add_job(
	p_jobid jobs.job_id%TYPE,
	p_jobtitle jobs.job_id%TYPE)
	IS
BEGIN
	INSERT INTO jobs (job_id, job_title)
	VALUES(p_jobid, p_jobtitle);
	
	COMMIT;
END;
/

EXECUTE add_job('IT_DBA', 'Database Administrator')

SELECT * FROM jobs WHERE job_id = 'IT_DBA';

EXECUTE add_job('ST_MAN', 'Stock Manager')

2.
CREATE OR REPLACE PROCEDURE upd_job(
	p_jobid jobs.job_id%TYPE,
	p_jobtitle jobs.job_id%TYPE)
IS

BEGIN
	UPDATE jobs
	SET job_title = p_jobtitle
	WHERE job_id = p_jobid;

	IF SQL%NOTFOUND THEN
		RAISE_APPLICATION_ERROR(-20202, 'No job updated');
	END IF;

END;
/
EXECUTE upd_job ('IT_DBA', 'Data Administrator')

SELECT * FROM jobs WHERE job_id = 'IT_DBA';

3.
CREATE OR REPLACE PROCEDURE del_job(
	p_jobid jobs.job_id%TYPE)
IS
BEGIN
	DELETE FROM jobs
	WHERE job_id = p_jobid;

	IF SQL%NOTFOUND THEN
		RAISE_APPLICATION_ERROR(-20203, 'No job deleted');
	END IF;

END;
/

EXECUTE del_job ('IT_DBA')
SELECT * FROM jobs WHERE job_id = 'IT_DBA';

4.
CREATE OR REPLACE PROCEDURE get_employee(
	p_empid IN employees.employee_id%TYPE,
	p_sal OUT employees.salary%TYPE,
	p_job OUT employees.job_id%TYPE)
IS

BEGIN
SELECT salary, job_id
INTO p_sal, p_job
FROM employees
WHERE employee_id = p_empid;
END;
/

VARIABLE b_salary NUMBER
VARIABLE b_job VARCHAR2(30)
EXECUTE get_employee(100, :b_salary, :b_job)
PRINT :b_salary :b_job


5.
CREATE OR REPLACE PROCEDURE raise_salary
  	(p_id IN employees.employee_id%type,
 	p_percent IN NUMBER)
  	IS
BEGIN
  	UPDATE employees
  	SET salary = salary * (1 + p_percent/100)
  	WHERE employee_id = p_id;
END raise_salary;
/

SELECT salary FROM employees WHERE employee_id = 176;

EXECUTE raise_salary(176,10);

SELECT salary FROM employees WHERE employee_id = 176;



6.
CREATE OR REPLACE PROCEDURE query_emp
  	(p_id IN employees.employee_id%TYPE,
  	p_name OUT employees.last_name%TYPE,
  	p_salary OUT employees.salary%TYPE)
  	IS
BEGIN
  	SELECT last_name, salary INTO p_name, p_salary
  	FROM employees
  	WHERE employee_id = p_id;
END query_emp;
/

SELECT salary FROM employees WHERE employee_id = 171;

DECLARE
  	v_emp_name employeeS.last_name%TYPE;
  	v_emp_sal employees.salary%TYPE;
BEGIN
  	query_emp(171, v_emp_name, v_emp_sal);
	DBMS_OUTPUT.PUT_LINE(v_emp_name||' earns '|| to_char(v_emp_sal, '$999,999.00'));
END;
/


7.
CREATE OR REPLACE PROCEDURE add_dept(
  	p_name IN departments.department_name%TYPE,
  	p_loc IN departments.location_id%TYPE)
  	IS
BEGIN
  	INSERT INTO departments(department_id,
  	department_name, location_id)
  	VALUES (departments_seq.NEXTVAL, p_name, p_loc);
END add_dept;
/


EXECUTE add_dept ('TRAINING', 2500)

SELECT department_id, department_name, location_id FROM departments;